window.onload=function(){var e=document.getElementById("OpenSpeedTest-UI");e.parentNode.replaceChild(e.contentDocument.documentElement,e),ostOnload(),OpenSpeedTest.Start()},function(e){var t,o,n=function(e){e&&"function"==typeof e&&e()};function s(e){if(!(this instanceof s))return new s(e);this.el=document.getElementById(e)}s.prototype.fade=function(e,t,o){var s="in"===e,i=s?0:1,r=14/t,a=this;s&&(a.el.style.display="block",a.el.style.opacity=i);var l=window.setInterval((function(){i=s?i+r:i-r,a.el.style.opacity=i,i<=0&&(a.el.style.display="none"),(i<=0||i>=1)&&window.clearInterval(l,n(o))}),14)};var i=function(e,t,o,n){return e/=n,o*(--e*e*e+1)+t},r=function(){this.YourIP=s("YourIP"),this.ipDesk=s("ipDesk"),this.ipMob=s("ipMob"),this.downSymbolDesk=s("downSymbolDesk"),this.upSymbolDesk=s("upSymbolDesk"),this.upSymbolMob=s("upSymbolMob"),this.downSymbolMob=s("downSymbolMob"),this.settingsMob=s("settingsMob"),this.settingsDesk=s("settingsDesk"),this.oDoLiveStatus=s("oDoLiveStatus"),this.ConnectErrorMob=s("ConnectErrorMob"),this.ConnectErrorDesk=s("ConnectErrorDesk"),this.downResult=s("downResult"),this.upRestxt=s("upRestxt"),this.pingResult=s("pingResult"),this.jitterDesk=s("jitterDesk"),this.pingMobres=s("pingMobres"),this.JitterResultMon=s("JitterResultMon"),this.JitterResultms=s("JitterResultms"),this.UI_Desk=s("UI-Desk"),this.UI_Mob=s("UI-Mob"),this.oDoTopSpeed=s("oDoTopSpeed"),this.startButtonMob=s("startButtonMob"),this.startButtonDesk=s("startButtonDesk"),this.intro_Desk=s("intro-Desk"),this.intro_Mob=s("intro-Mob"),this.loader=s("loading_app"),this.OpenSpeedtest=s("OpenSpeedtest"),this.mainGaugebg_Desk=s("mainGaugebg-Desk"),this.mainGaugeBlue_Desk=s("mainGaugeBlue-Desk"),this.mainGaugeWhite_Desk=s("mainGaugeWhite-Desk"),this.mainGaugebg_Mob=s("mainGaugebg-Mob"),this.mainGaugeBlue_Mob=s("mainGaugeBlue-Mob"),this.mainGaugeWhite_Mob=s("mainGaugeWhite-Mob"),this.oDoLiveSpeed=s("oDoLiveSpeed"),this.progressStatus_Mob=s("progressStatus-Mob"),this.progressStatus_Desk=s("progressStatus-Desk"),this.graphc1=s("graphc1"),this.graphc2=s("graphc2"),this.graphMob2=s("graphMob2"),this.graphMob1=s("graphMob1"),this.text=s("text"),this.scale=[{degree:680,value:0},{degree:570,value:.5},{degree:460,value:1},{degree:337,value:10},{degree:220,value:100},{degree:115,value:500},{degree:0,value:1e3}],this.element="",this.chart="",this.polygon="",this.width=200,this.height=50,this.maxValue=0,this.values=[],this.points=[],this.vSteps=5,this.measurements=[],this.points=[]};r.prototype.reset=function(){this.element="",this.chart="",this.polygon="",this.width=200,this.height=50,this.maxValue=0,this.values=[],this.points=[],this.vSteps=5,this.measurements=[],this.points=[]},r.prototype.ip=function(){var e=this;"block"===e.ipDesk.el.style.display?(e.ipDesk.el.style.display="none",e.ipMob.el.style.display="none"):(e.ipDesk.el.style.display="block",e.ipMob.el.style.display="block")},r.prototype.prePing=function(){this.loader.fade("out",500),this.OpenSpeedtest.fade("in",1e3)},r.prototype.app=function(){this.loader.fade("out",500,this.ShowAppIntro())},r.prototype.ShowAppIntro=function(){this.OpenSpeedtest.fade("in",1e3)},r.prototype.userInterface=function(){this.intro_Desk.fade("out",1e3),this.intro_Mob.fade("out",1e3,this.ShowUI())},r.prototype.ShowUI=function(){this.UI_Desk.fade("in",1e3),this.UI_Mob.fade("in",1e3,(function(e){t="Loaded",console.log("Developed by Vishnu. Email --\x3e me@vishnu.pro")}))},r.prototype.Symbol=function(e){0==e&&(this.downSymbolMob.el.style.display="block",this.downSymbolDesk.el.style.display="block",this.upSymbolMob.el.style.display="none",this.upSymbolDesk.el.style.display="none"),1==e&&(this.downSymbolMob.el.style.display="none",this.downSymbolDesk.el.style.display="none",this.upSymbolMob.el.style.display="block",this.upSymbolDesk.el.style.display="block"),2==e&&(this.downSymbolMob.el.style.display="none",this.downSymbolDesk.el.style.display="none",this.upSymbolMob.el.style.display="none",this.upSymbolDesk.el.style.display="none")},r.prototype.Graph=function(e,t){"remove"in Element.prototype||(Element.prototype.remove=function(){this.parentNode&&this.parentNode.removeChild(this)});var o,n,s=this;if(0===t){var i=this.graphc1.el;o="line",this.graphMob2.el.style.display="none",this.graphMob1.el.style.display="block"}else i=this.graphc2.el,o="line2",this.graphMob1.el.style.display="none",this.graphMob2.el.style.display="block";isNaN(e)?this.values.push(""):this.values.push(e),e>0&&function(e,t){!function(){for(s.maxValue=0,n=0;n<s.values.length;n++)s.values[n]>s.maxValue&&(s.maxValue=s.values[n]);s.maxValue=Math.ceil(s.maxValue)}(),function(){if(s.values.length>1){var e="0,"+s.height+" ";for(n=0;n<s.values.length;n++){var t=s.values[n]/s.maxValue;e+=(130/(s.values.length-1)*n).toFixed(2)+","+(s.height-s.height*t).toFixed(2)+" "}e+="130,"+s.height,s.points=e}}(),function(){for(n=0;n<s.vSteps;n++){var e=Math.ceil(s.maxValue/s.vSteps*(n+1));s.measurements.push(e)}s.measurements.reverse()}();for(var r=document.getElementsByClassName(o);r.length>0;)r[0].remove();s.polygon=document.createElementNS("http://www.w3.org/2000/svg","polygon"),s.polygon.setAttribute("points",s.points),s.polygon.setAttribute("class",o),s.values.length>1&&i.appendChild(s.polygon)}()},r.prototype.progress=function(e,t){var n=this,s=t,r=e,a=Date.now(),l=setInterval((function(){var e=(Date.now()-a)/1e3,t=i(e,400,400,s),u=i(e,400,-400,s);r?(n.progressStatus_Desk.el.style.strokeDashoffset=t,n.progressStatus_Mob.el.style.strokeDashoffset=t):(n.progressStatus_Desk.el.style.strokeDashoffset=u,n.progressStatus_Mob.el.style.strokeDashoffset=u),e>=s&&(clearInterval(l),o="done",n.progressStatus_Desk.el.style.strokeDashoffset=800,n.progressStatus_Mob.el.style.strokeDashoffset=800)}),14)},r.prototype.mainGaugeProgress=function(e){var t=e;t<0&&(t=0);var o=this.getNonlinearDegree(t);e>0&&(this.mainGaugeBlue_Desk.el.style.strokeOpacity=1,this.mainGaugeWhite_Desk.el.style.strokeOpacity=1,this.mainGaugeBlue_Mob.el.style.strokeOpacity=1,this.mainGaugeWhite_Mob.el.style.strokeOpacity=1,this.mainGaugeBlue_Desk.el.style.strokeDashoffset=o,this.mainGaugeWhite_Desk.el.style.strokeDashoffset=0==o?1:o+1,this.mainGaugeBlue_Mob.el.style.strokeDashoffset=o,this.mainGaugeWhite_Mob.el.style.strokeDashoffset=0==o?1:o+1),0==o&&t>1e3?(this.mainGaugeBlue_Mob.el.style.strokeDashoffset=o>=681?681:o,this.mainGaugeWhite_Mob.el.style.strokeDashoffset=0==o?1:o+1,this.mainGaugeWhite_Desk.el.style.strokeDashoffset=0==o?1:o+1,this.mainGaugeBlue_Desk.el.style.strokeDashoffset=o>=681?681:o):0==o&&t<=0&&(this.mainGaugeBlue_Mob.el.style.strokeDashoffset=681.1,this.mainGaugeWhite_Mob.el.style.strokeDashoffset=.1,this.mainGaugeWhite_Desk.el.style.strokeDashoffset=.1,this.mainGaugeBlue_Desk.el.style.strokeDashoffset=681.1)},r.prototype.showStatus=function(e){this.oDoLiveStatus.el.textContent=e},r.prototype.ConnectionError=function(){this.ConnectErrorMob.el.style.display="block",this.ConnectErrorDesk.el.style.display="block"},r.prototype.uploadResult=function(e){e<1&&(this.upRestxt.el.textContent=e.toFixed(3)),e>=1&&e<9999&&(this.upRestxt.el.textContent=e.toFixed(1)),e>=1e4&&e<99999&&(this.upRestxt.el.textContent=e.toFixed(1),this.upRestxt.el.style.fontSize="20px"),e>=1e5&&(this.upRestxt.el.textContent=e.toFixed(1),this.upRestxt.el.style.fontSize="18px")},r.prototype.pingResults=function(e,t){var o=e;"Ping"===t&&(o>=1&&o<1e4?(this.pingResult.el.textContent=Math.floor(o),this.pingMobres.el.textContent=Math.floor(o)):o>=0&&o<1&&(0==o&&(o=0),this.pingResult.el.textContent=o,this.pingMobres.el.textContent=o)),"Error"===t&&(this.oDoLiveSpeed.el.textContent=o)},r.prototype.downloadResult=function(e){e<1&&(this.downResult.el.textContent=e.toFixed(3)),e>=1&&e<9999&&(this.downResult.el.textContent=e.toFixed(1)),e>=1e4&&e<99999&&(this.downResult.el.textContent=e.toFixed(1),this.downResult.el.style.fontSize="20px"),e>=1e5&&(this.downResult.el.textContent=e.toFixed(1),this.downResult.el.style.fontSize="18px")},r.prototype.jitterResult=function(e,t){var o=e;if("Jitter"===t)if(o>=1&&o<1e4){if(this.jitterDesk.el.textContent=Math.floor(o),o>=1&&o<100&&(this.JitterResultMon.el.textContent=Math.floor(o)),o>=100){var n=(o/1e3).toFixed(1);this.JitterResultMon.el.textContent=n+"k"}}else o>=0&&o<1&&(0==o&&(o=0),this.jitterDesk.el.textContent=o,this.JitterResultMon.el.textContent=o)},r.prototype.LiveSpeed=function(e,t){var o=e;if("countDown"!==t){if("speedToZero"===t)return"number"==typeof o&&(o=o.toFixed(1)),o<=0&&(o=0),this.oDoLiveSpeed.el.textContent=o,this.oDoTopSpeed.el.textContent="1000+",this.oDoTopSpeed.el.style.fontSize="16.9px",void(this.oDoTopSpeed.el.style.fill="gray");if("Ping"===t)o>=1&&o<1e4?this.oDoLiveSpeed.el.textContent=Math.floor(o):o>=0&&o<1&&(0==o&&(o=0),this.oDoLiveSpeed.el.textContent=o);else{if(0==o){n=o.toFixed(0);this.oDoLiveSpeed.el.textContent=n}if(o<=1&&o>0){n=o.toFixed(3);this.oDoLiveSpeed.el.textContent=n}if(o>1){n=o.toFixed(1);this.oDoLiveSpeed.el.textContent=n}o<=1e3&&(this.oDoTopSpeed.el.textContent="1000+",this.oDoTopSpeed.el.style.fontSize="16.9px",this.oDoTopSpeed.el.style.fill="gray"),o>=1010&&(this.oDoTopSpeed.el.textContent=1e3*Math.floor(o/1010)+"+",this.oDoTopSpeed.el.style.fill="gray",this.oDoTopSpeed.el.style.fontSize="17.2px")}}else{var n=o.toFixed(0);this.oDoLiveSpeed.el.textContent=n}},r.prototype.GaugeProgresstoZero=function(e,o){var n=e,s=this;if(n>=0)var i=Date.now(),r=0-n,a=setInterval((function(){var e,l=(Date.now()-i)/1e3,u=(e=l,e/=3,r*(--e*e*e*e*e+1)+n);s.LiveSpeed(u,"speedToZero"),s.mainGaugeProgress(u),(l>=3||u<=0)&&(clearInterval(a),s.LiveSpeed(0,"speedToZero"),s.mainGaugeProgress(0),t=o)}),16)},r.prototype.getNonlinearDegree=function(e){var t=0;if(0==e||e<=0||isNaN(e))return 0;for(;t<this.scale.length;){if(!(e>this.scale[t].value))return this.scale[t-1].degree+(e-this.scale[t-1].value)*(this.scale[t].degree-this.scale[t-1].degree)/(this.scale[t].value-this.scale[t-1].value);t++}return this.scale[this.scale.length-1].degree};var a=function(){this.OverAllTimeAvg=window.performance.now(),this.SpeedSamples=[],this.FinalSpeed};a.prototype.reset=function(){this.OverAllTimeAvg=window.performance.now(),this.SpeedSamples=[],this.FinalSpeed=0},a.prototype.ArraySum=function(e){return e?e.reduce((function(e,t){if("number"==typeof e&&"number"==typeof t)return e+t}),0):0},a.prototype.AvgSpeed=function(e,t,o){var n=this;this.timeNow=(window.performance.now()-this.OverAllTimeAvg)/1e3,this.FinalSpeed;var s=t;return s=o-s,this.timeNow>=s&&(e>0&&this.SpeedSamples.push(e),n.FinalSpeed=n.ArraySum(n.SpeedSamples)/n.SpeedSamples.length),n.FinalSpeed},a.prototype.uRandom=function(e,t){var o=new Uint32Array(262144);function s(){for(var e=o.length,t=0;t<e;t++)o[t]=4294967296*Math.random();return o}var i=[];return new Blob(function(e){for(var t=0;t<e;t++)i[t]=s();return i}(e),{type:"application/octet-stream"},n(t))},a.prototype.addEvt=function(e,t,o){e.addEventListener(t,o)},a.prototype.remEvt=function(e,t,o){e.removeEventListener(t,o)};var l=function(){var e,n=new a,s=new r;s.app();var i,l,u,p,d,h,f,g,c,y,v,m,S,D,w,b,k=location.hostname,M=[],x=0,T=0,R=0,C=0;function L(){0,0,v=0,R=0}b=window.navigator.userAgent?window.navigator.userAgent:"Not Found";var I=.6*ulDuration,E=.6*dlDuration;.6*ulDuration>=7&&(I=7),.6*dlDuration>=7&&(E=7);var _=!0,G=!0;n.addEvt(s.settingsMob.el,"click",oe),n.addEvt(s.settingsDesk.el,"click",oe),n.addEvt(s.startButtonDesk.el,"click",ne),n.addEvt(s.startButtonMob.el,"click",ne),n.addEvt(document,"keypress",se);var F,P,A,B,O=!0,N=function(e){var t={},o=document.createElement("a");o.href=e;for(var n=o.search.substring(1).split("&"),s=0;s<n.length;s++){var i=n[s].split("=");t[i[0]]=decodeURIComponent(i[1])}return t}(window.location.href.toLowerCase());setPingSamples&&("string"!=typeof N.ping&&"string"!=typeof N.p||(void 0!==N.ping?F=N.ping:void 0!==N.p&&(F=N.p),F>0&&(pingSamples=F,pingSamples=F)));setPingTimeout&&("string"!=typeof N.out&&"string"!=typeof N.o||(void 0!==N.out?P=N.out:void 0!==N.o&&(P=N.o),P>1&&(pingTimeOut=P,pingTimeOut=P)));setHTTPReq&&("string"!=typeof N.xhr&&"string"!=typeof N.x||(void 0!==N.xhr?A=N.xhr:void 0!==N.x&&(A=N.x),A>0&&A<=32&&(dlThreads=A,ulThreads=A)));selectServer&&("string"!=typeof N.host&&"string"!=typeof N.h||(void 0!==N.host?B=N.host:void 0!==N.h&&(B=N.h),/(?:https?):\/\/(\w+:?\w*)?(\S+)(:\d+)?(\/|\/([\w#!:.?+=&%!\-\/]))?/.test(B)&&(openSpeedTestServerList=[{ServerName:"Home",Download:B+"/downloading",Upload:B+"/upload",ServerIcon:"DefaultIcon"}])));var U,H,j=parseInt(N.stress),W=parseInt(N.s);"string"==typeof N.stress?(U=N.stress,H=j):"string"==typeof N.s&&(U=N.s,H=W),U&&stressTest&&("low"!==U&&"l"!==U||(dlDuration=300,ulDuration=300),"medium"!==U&&"m"!==U||(dlDuration=600,ulDuration=600),"high"!==U&&"h"!==U||(dlDuration=900,ulDuration=900),"veryhigh"!==U&&"v"!==U||(dlDuration=1800,ulDuration=1800),"extreme"!==U&&"e"!==U||(dlDuration=3600,ulDuration=3600),"day"!==U&&"d"!==U||(dlDuration=86400,ulDuration=86400),"year"!==U&&"y"!==U||(dlDuration=31557600,ulDuration=31557600),(j>12||W>12)&&(dlDuration=H,ulDuration=H));var z=parseInt(N.clean),J=parseInt(N.c),V=1;z?V=z:J&&(V=J),enableClean&&("string"!=typeof N.clean&&"string"!=typeof N.c||(z>=1||J>=1?(z<5||J<5)&&(upAdjust=1+V/100,dlAdjust=1+V/100):(upAdjust=1,dlAdjust=1)));var q,Z=parseInt(N.run),X=parseInt(N.r);enableRun&&("string"!=typeof N.run&&"string"!=typeof N.r||(q=Z>0?Z:X>0?X:0)),q>=0&&_&&ne();var Y,Q=N.test,K=N.t,$=!1;selectTest&&("string"!=typeof Q&&"string"!=typeof K||(Q?(Y=Q,$=Q):K&&(Y=K,$=K),"download"===Y||"d"===Y?(p=0,h=0,$="Download",_&&ne()):"upload"===Y||"u"===Y?(u=0,d=0,$="Upload",C=1,_&&ne()):"ping"===Y||"p"===Y?(p=0,h=0,u=0,d=0,$="Ping",_&&ne()):$=!1));var ee=0;var te=!1;function oe(){te&&(s.YourIP.el.textContent="Please wait..",He(7),te=!1),s.ip()}function ne(){if(O&&(n.remEvt(s.settingsMob.el,"click",oe),n.remEvt(s.settingsDesk.el,"click",oe),n.remEvt(s.startButtonDesk.el,"click",ne),n.remEvt(s.startButtonMob.el,"click",ne),n.remEvt(document,"keypress",se),O=!1),q>=0){_=!1,s.userInterface(),G=!1;var e=Math.ceil(Math.abs(q));s.showStatus("Automatic Test Starts in ...");var t=setInterval((function(){e>=1?(e-=1,s.LiveSpeed(e,"countDown")):e<=0&&(clearInterval(t),_=!0,q=void 0,ne())}),1e3)}"fetch"===openSpeedTestServerList&&!0===_&&(_=!1,s.showStatus("Fetching Server Info.."),He(6)),!0===_&&("Ping"===$||"Download"===$||"Upload"===$||!1===$)&&re()}function se(e){"Enter"===e.key&&ne()}var ie=0;function re(){G&&(s.userInterface(),G=!1),function(){"widget"!==openChannel&&"web"!==openChannel||He(1);function i(){w=window.performance.now(),function(){for(var e=0;e<ulThreads;e++)setTimeout((function(e){Fe(e)}),ulDelay*e,e)}()}var r=setInterval((function(){if("Loaded"===t&&(t="busy",Ue()),"Ping"===t&&(t="busy",s.showStatus("Milliseconds")),"Download"===t&&(s.showStatus("Initializing.."),n.reset(),L(),s.reset(),D=window.performance.now(),function(){for(var e=0;e<dlThreads;e++)setTimeout((function(e){Ce(e)}),dlDelay*e,e)}(),t="initDown"),"Downloading"===t){if(s.Symbol(0),0==ee){ee=1,s.showStatus("Testing download speed..");var a=(window.performance.now()-D)/1e3;ae=a,s.progress(1,dlDuration+2.5),dlDuration+=a}S=(window.performance.now()-D)/1e3,Re("dl"),s.showStatus("Mbps download"),s.mainGaugeProgress(R),s.LiveSpeed(R),s.Graph(R,0),u=n.AvgSpeed(R,E,dlDuration),S>=dlDuration&&"done"==o&&($?(s.GaugeProgresstoZero(R,"SendR"),s.showStatus("All done"),s.Symbol(2)):s.GaugeProgresstoZero(R,"Upload"),s.downloadResult(u),d=x,C=1,t="busy",L(),n.reset())}if("Upload"==t&&1===C&&(s.Symbol(1),t="initup",s.showStatus("Initializing.."),s.LiveSpeed("...","speedToZero"),e=n.uRandom(ulDataSize,i),$&&(ee=1)),"Uploading"===t){if(1==ee){ee=2,s.showStatus("Testing upload speed.."),R=0,n.reset(),s.reset();var l=(window.performance.now()-w)/1e3;le=l,s.progress(!1,ulDuration+2.5),ulDuration+=l}s.showStatus("Mbps upload"),m=(window.performance.now()-w)/1e3,Re("up"),s.mainGaugeProgress(R),s.LiveSpeed(R),s.Graph(R,1),p=n.AvgSpeed(R,I,ulDuration),m>=ulDuration&&1==C&&(h=T,s.uploadResult(p),s.GaugeProgresstoZero(R,"SendR"),e=void 0,s.showStatus("All done"),s.Symbol(2),t="busy",C=0)}if("Error"===t){s.showStatus("Check your network connection status."),s.ConnectionError(),t="busy",clearInterval(r),(c=document.createElement("div")).innerHTML='<a xlink:href="https://openspeedtest.com/FAQ.php?ref=NetworkError" style="cursor: pointer" target="_blank"></a>';var f=c.querySelector("a");s.oDoLiveSpeed.el.textContent="Network Error";var g=document.getElementById("oDoLiveSpeed");f.innerHTML=g.innerHTML,g.innerHTML=c.innerHTML}if("SendR"===t){var c;s.showStatus("All done"),(c=document.createElement("div")).innerHTML='<a xlink:href="https://openspeedtest.com?ref=Self-Hosted-Outro&run=5" style="cursor: pointer" target="_blank"></a>';g=document.getElementById("oDoLiveSpeed");f.innerHTML=g.innerHTML,g.innerHTML=c.innerHTML,t="busy",clearInterval(r)}}),100)}()}"web"===openChannel&&(ie=webRe,te=!0),"widget"===openChannel&&(ie=widgetRe,te=!0),"selfwidget"===openChannel&&(ie=widgetRe,l=domainx,k=l),openChannel;var ae,le,ue,pe,de=0,he=0,fe=0,ge=0,ce=0,ye=0,ve=0,me=0,Se=0,De=0,we=0,be=0,ke=0,Me=0,xe=1e3*dlDuration-6e3,Te=1e3*ulDuration-6e3;function Re(e){if("dl"===e){var t=1e3*S;t>1e3*ae+E/2*1e3&&0===ve&&(ve=1,ye*=.01,fe*=.01,ue=t+1e4),t>=ue&&ue<xe&&(ue+=1e4,ye*=.01,fe*=.01),de=x<=0?0:x-he,he=x,ge=ce=t-ce,ce=t,ye+=ge,(fe+=de)>0&&(v=fe/ye/125*upAdjust,R=v)}if("up"===e){var o=1e3*m;o>1e3*le+I/2*1e3&&0===Me&&(Me=1,ke*=.1,De*=.1,pe=o+1e4),o>=pe&&pe<Te&&(pe+=1e4,ke*=.1,De*=.1),me=T<=0?0:T-Se,Se=T,we=be=o-be,be=o,ke+=we,(De+=me)>0&&(v=De/ke/125*upAdjust,R=v)}}function Ce(e){var o=0,n=new XMLHttpRequest;M[e]=n,M[e].open("GET",Le.Download+"?n="+Math.random(),!0),M[e].onprogress=function(n){if(1===C)return M[e].abort(),M[e]=null,M[e]=void 0,delete M[e],!1;"initDown"==t&&(t="Downloading");var s=n.loaded<=0?0:n.loaded-o;if(isNaN(s)||!isFinite(s)||s<0)return!1;x+=s,o=n.loaded},M[e].onload=function(n){0===o&&(x+=n.total),"initDown"==t&&(t="Downloading"),M[e]&&(M[e].abort(),M[e]=null,M[e]=void 0,delete M[e]),0===C&&Ce(e)},M[e].onerror=function(t){0===C&&Ce(e)},M[e].responseType="arraybuffer",M[e].send()}var Le,Ie,Ee,_e,Ge=[];function Fe(o){var n=0,s=new XMLHttpRequest;Ge[o]=s,Ge[o].open("POST",Le.Upload+"?n="+Math.random(),!0),Ge[o].upload.onprogress=function(e){"initup"==t&&(t="Uploading");if(m>=ulDuration)return Ge[o].abort(),Ge[o]=null,Ge[o]=void 0,delete Ge[o],!1;var s=e.loaded<=0?0:e.loaded-n;if(isNaN(s)||!isFinite(s)||s<0)return!1;T+=s,n=e.loaded},Ge[o].onload=function(){if(0===n&&(T+=1048576*ulDataSize,m>=ulDuration))return Ge[o].abort(),Ge[o]=null,Ge[o]=void 0,delete Ge[o],!1;"initup"==t&&(t="Uploading");Ge[o]&&(Ge[o].abort(),Ge[o]=null,Ge[o]=void 0,delete Ge[o]),1===C&&Fe(o)},Ge[o].onerror=function(e){m<=ulDuration&&Fe(o)},Ge[o].setRequestHeader("Content-Type","application/octet-stream"),o>0&&T<=17e3||Ge[o].send(e)}var Pe=-1,Ae=[],Be=[],Oe=[],Ne=openSpeedTestServerList.length;function Ue(){if(Ne=openSpeedTestServerList.length,t="Ping",performance.clearResourceTimings(),Pe<Ne-1)Pe++,"Stop"!=_e&&function(e,t){var o=0,n=[],i=[];function r(){if(o<pingSamples)o++,"Stop"!=_e&&a();else if(n.length>1){i.sort((function(e,t){return e-t}));var s=(i=(i=i.slice(0,i.length*jitterFinalSample)).reduce((function(e,t){return e+t}),0)/i.length).toFixed(1),r=Math.min.apply(Math,n);Ae.push(r),Be.push(e),Oe.push(s),"function"==typeof t&&t()}else"function"==typeof t&&t()}function a(){var t=new XMLHttpRequest;"Stop"!=_e&&t.abort(),t.open(pingMethod,e[pingFile]+"?n="+Math.random(),!0),t.timeout=pingTimeOut;var a=window.performance.now();t.send(),t.onload=function(){if(200===this.status&&4===this.readyState){var e,t=Math.floor(window.performance.now()-a),l=performance.getEntries();if(e="xmlhttprequest"===(l=l[l.length-1]).initiatorType?parseFloat(l.duration.toFixed(1)):t,o>250&&(e=t),e<=0?(.1,n.push(.1)):(e,n.push(e)),n.length>1){var u=Math.abs(n[n.length-1]-n[n.length-2]).toFixed(1);i.push(parseFloat(u)),u,s.LiveSpeed(e,"Ping"),s.pingResults(e,"Ping"),s.jitterResult(u,"Jitter")}r()}404===this.status&&4===this.readyState&&(o++,r())},t.onerror=function(e){o++,r()},t.ontimeout=function(e){o++,r()}}a()}(openSpeedTestServerList[Pe],Ue);else if(Be.length>=1){var e=Math.min.apply(Math,Ae),o=Ae.indexOf(e);Le=Be[o],Ie=e,Ee=Oe[o],_e="Busy",s.LiveSpeed(Ie,"Ping"),s.pingResults(Ie,"Ping"),s.jitterResult(Ee,"Jitter"),f=Ie,g=Ee,t=$?"Ping"==$?"SendR":$:"Download"}else Be.Download||(t="Error")}var He=function(e){var t=new XMLHttpRequest,o=OpenSpeedTestdb;1==e&&(o=webIP),5==e&&(o=saveDataURL),7==e&&(o=get_IP),t.open("POST",o,!0),t.setRequestHeader("Content-type","application/x-www-form-urlencoded"),t.onreadystatechange=function(){4==t.readyState&&200==t.status&&(y=t.responseText.trim(),2==e&&(i=y),1==e&&(l=y),3==e&&setTimeout((function(){location.href=ie+y}),1500),6==e&&(openSpeedTestServerList=JSON.parse(y),_=!0,ne()),7==e&&(s.YourIP.el.textContent=y))},2==e&&(c="r=n"),3==e&&(c="r=l&d="+u+"&u="+p+"&dd="+d/1048576+"&ud="+h/1048576+"&p="+f+"&do="+k+"&S="+i+"&sip="+l+"&jit="+g+"&ua="+b),5==e&&(c=undefined),6==e&&(c="r=s"),t.send(c)}};e.Start=function(){new l}}(window.OpenSpeedTest=window.OpenSpeedTest||{});